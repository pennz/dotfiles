#!/bin/bash -li

# config change commit
cb=$(config rev-parse --abbrev-ref HEAD)
[ $# -lt 1 ] || config stash; 
config checkout master; 
config pull && \
( [ $# -lt 1 ] || (config stash pop && config commit -asm "$*" && config push ) ) && \  # $# < 1, no commit message, just pull
config checkout "$cb" && \
config merge --no-edit master
